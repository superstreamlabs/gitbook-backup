{"title":"Memphis Dashboard","description":"","widgets":[{"id":7589990296219590,"definition":{"title":"Memphis Storage","show_title":true,"type":"group","layout_type":"ordered","widgets":[{"id":530587271868821,"definition":{"title":"Storage Used (%)","title_size":"16","title_align":"left","type":"query_value","requests":[{"formulas":[{"formula":"(query1 / query2) * 100"}],"conditional_formats":[{"comparator":">=","palette":"white_on_yellow","value":70},{"comparator":">=","palette":"white_on_red","value":90},{"comparator":"<","palette":"white_on_green","value":70}],"response_format":"scalar","queries":[{"query":"sum:memphis.nats_varz_jetstream_stats_storage{server_id:*}","data_source":"metrics","name":"query1","aggregator":"sum"},{"query":"sum:memphis.nats_varz_jetstream_config_max_storage{server_id:*}","data_source":"metrics","name":"query2","aggregator":"sum"}]}],"autoscale":true,"precision":2},"layout":{"x":0,"y":0,"width":2,"height":2}},{"id":336190305687500,"definition":{"title":"Max Storage","title_size":"16","title_align":"left","type":"query_value","requests":[{"formulas":[{"formula":"query1"}],"conditional_formats":[{"comparator":">","palette":"white_on_green","value":0}],"response_format":"scalar","queries":[{"query":"sum:memphis.nats_varz_jetstream_config_max_storage{server_id:*}","data_source":"metrics","name":"query1","aggregator":"avg"}]}],"autoscale":true,"custom_unit":"","precision":2},"layout":{"x":2,"y":0,"width":2,"height":1}},{"id":6313225302439646,"definition":{"title":"Total Storage Used","title_size":"16","title_align":"left","type":"query_value","requests":[{"formulas":[{"formula":"query1"}],"conditional_formats":[{"comparator":">","palette":"white_on_green","value":0}],"response_format":"scalar","queries":[{"query":"sum:memphis.nats_varz_jetstream_stats_storage{server_id:*}","data_source":"metrics","name":"query1","aggregator":"avg"}]}],"autoscale":true,"precision":2},"layout":{"x":2,"y":1,"width":2,"height":1}}]},"layout":{"x":0,"y":0,"width":4,"height":3}},{"id":457200032942172,"definition":{"title":"Memphis Memory","show_title":true,"type":"group","layout_type":"ordered","widgets":[{"id":8002858581939339,"definition":{"title":"Memory Used","title_size":"16","title_align":"left","type":"query_value","requests":[{"formulas":[{"formula":"query1 / query2"}],"conditional_formats":[{"comparator":"<","palette":"white_on_green","value":80},{"comparator":">=","palette":"white_on_yellow","value":80},{"comparator":">=","palette":"white_on_red","value":90}],"response_format":"scalar","queries":[{"query":"sum:memphis.nats_varz_jetstream_stats_memory{server_id:*}","data_source":"metrics","name":"query1","aggregator":"avg"},{"query":"sum:memphis.nats_varz_jetstream_config_max_memory{server_id:*}","data_source":"metrics","name":"query2","aggregator":"avg"}]}],"autoscale":true,"custom_unit":"%","precision":2},"layout":{"x":0,"y":0,"width":2,"height":2}},{"id":1886363440354607,"definition":{"title":"Memory Used","title_size":"16","title_align":"left","type":"query_value","requests":[{"formulas":[{"formula":"query1"}],"conditional_formats":[{"comparator":"<","palette":"white_on_green","value":80},{"comparator":">=","palette":"white_on_yellow","value":80},{"comparator":">=","palette":"white_on_red","value":90}],"response_format":"scalar","queries":[{"query":"sum:memphis.nats_varz_jetstream_stats_memory{server_id:*}","data_source":"metrics","name":"query1","aggregator":"avg"}]}],"autoscale":true,"custom_unit":"B","precision":2},"layout":{"x":2,"y":0,"width":2,"height":1}},{"id":7310514127354536,"definition":{"title":"Total Memory","title_size":"16","title_align":"left","type":"query_value","requests":[{"formulas":[{"formula":"query1"}],"conditional_formats":[{"comparator":">","palette":"white_on_green","value":0}],"response_format":"scalar","queries":[{"query":"sum:memphis.nats_varz_jetstream_config_max_memory{server_id:*}","data_source":"metrics","name":"query1","aggregator":"avg"}]}],"autoscale":true,"precision":2},"layout":{"x":2,"y":1,"width":2,"height":1}}]},"layout":{"x":4,"y":0,"width":4,"height":3}},{"id":1615203109341482,"definition":{"title":"Memphis Cluster Size","title_size":"16","title_align":"left","type":"query_value","requests":[{"formulas":[{"formula":"query1"}],"conditional_formats":[{"comparator":">","palette":"white_on_green","value":0}],"response_format":"scalar","queries":[{"query":"sum:kubernetes_state.statefulset.replicas{kube_app_name:memphis}","data_source":"metrics","name":"query1","aggregator":"avg"}]}],"autoscale":true,"precision":2},"layout":{"x":8,"y":0,"width":2,"height":1}},{"id":1011959448287926,"definition":{"title":"Ready Brokers","title_size":"16","title_align":"left","type":"query_value","requests":[{"formulas":[{"formula":"query1","limit":{"order":"desc"}}],"conditional_formats":[{"comparator":"<=","palette":"white_on_red","value":1},{"comparator":"<=","palette":"white_on_yellow","value":2},{"comparator":"<=","palette":"white_on_green","value":3}],"response_format":"scalar","queries":[{"query":"min:memphis.nats_varz_jetstream_meta_cluster_size{*}","data_source":"metrics","name":"query1","aggregator":"last"}]}],"autoscale":true,"precision":2},"layout":{"x":10,"y":0,"width":2,"height":1}},{"id":8106015896876032,"definition":{"title":"Active Connections","title_size":"16","title_align":"left","type":"query_value","requests":[{"formulas":[{"formula":"query1"}],"conditional_formats":[{"comparator":">=","palette":"white_on_green","value":0}],"response_format":"scalar","queries":[{"query":"sum:memphis.nats_varz_connections{server_id:*}","data_source":"metrics","name":"query1","aggregator":"last"}]}],"autoscale":true,"precision":2},"layout":{"x":8,"y":1,"width":2,"height":1}},{"id":5341063563769442,"definition":{"title":"Current Stored Messages","title_size":"16","title_align":"left","type":"query_value","requests":[{"formulas":[{"formula":"query1"}],"conditional_formats":[{"comparator":">","palette":"white_on_green","value":0}],"response_format":"scalar","queries":[{"query":"sum:memphis.nats_stream_total_messages{*}","data_source":"metrics","name":"query1","aggregator":"avg"}]}],"autoscale":true,"precision":2},"layout":{"x":10,"y":1,"width":2,"height":1}},{"id":2998660556375535,"definition":{"title":"Total Consumers","title_size":"16","title_align":"left","type":"query_value","requests":[{"formulas":[{"formula":"query1"}],"conditional_formats":[{"comparator":">=","palette":"white_on_green","value":0}],"response_format":"scalar","queries":[{"query":"sum:memphis.nats_server_total_consumers{server_id:*}","data_source":"metrics","name":"query1","aggregator":"last"}]}],"autoscale":true,"precision":2},"layout":{"x":8,"y":2,"width":2,"height":1}},{"id":188871246475573,"definition":{"title":"Total Stations","title_size":"16","title_align":"left","time":{},"type":"query_value","requests":[{"response_format":"scalar","queries":[{"query":"sum:memphis.nats_stream_total_bytes{stream_name:*} by {stream_name}","data_source":"metrics","name":"query1","aggregator":"last"}],"formulas":[{"formula":"count_not_null(query1)"}],"conditional_formats":[{"comparator":">","palette":"white_on_green","value":0}]}],"autoscale":true,"precision":2},"layout":{"x":10,"y":2,"width":2,"height":1}},{"id":6199622532873574,"definition":{"title":"Station","show_title":true,"type":"group","layout_type":"ordered","widgets":[{"id":5707278753782753,"definition":{"title":"Station Data Size","title_size":"16","title_align":"left","time":{},"type":"toplist","requests":[{"formulas":[{"formula":"query1","limit":{"order":"desc"}}],"response_format":"scalar","queries":[{"query":"sum:memphis.nats_stream_total_bytes{*} by {stream_name}","data_source":"metrics","name":"query1","aggregator":"last"}]}]},"layout":{"x":0,"y":0,"width":3,"height":4}},{"id":897640833089405,"definition":{"title":"Station Message Count","title_size":"16","title_align":"left","time":{},"type":"toplist","requests":[{"formulas":[{"formula":"query1","limit":{"order":"desc"}}],"response_format":"scalar","queries":[{"query":"sum:memphis.nats_stream_total_messages{stream_name:*} by {stream_name}","data_source":"metrics","name":"query1","aggregator":"last"}]}]},"layout":{"x":3,"y":0,"width":3,"height":4}},{"id":896714691891707,"definition":{"title":"Messages Rate (per second)","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"per_minute(query1)"}],"response_format":"timeseries","queries":[{"query":"sum:memphis.nats_stream_total_messages{stream_name:*} by {stream_name}","data_source":"metrics","name":"query1"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}]},"layout":{"x":0,"y":4,"width":6,"height":2}}]},"layout":{"x":0,"y":0,"width":6,"height":7,"is_column_break":true}},{"id":4857224853075242,"definition":{"title":"Consumers","show_title":true,"type":"group","layout_type":"ordered","widgets":[{"id":3671814530188037,"definition":{"title":"Consumer Pending Messages per Station","title_size":"16","title_align":"left","type":"toplist","requests":[{"formulas":[{"formula":"query1","limit":{"order":"desc"}}],"response_format":"scalar","queries":[{"query":"sum:memphis.nats_consumer_num_pending{consumer_name:*} by {consumer_name}","data_source":"metrics","name":"query1","aggregator":"last"}]}]},"layout":{"x":0,"y":0,"width":3,"height":4}},{"id":3079112855765002,"definition":{"title":"Consumer ack pending messages per Station","title_size":"16","title_align":"left","type":"toplist","requests":[{"formulas":[{"formula":"query1","limit":{"order":"desc"}}],"response_format":"scalar","queries":[{"query":"sum:memphis.nats_consumer_num_ack_pending{consumer_name:*} by {consumer_name}","data_source":"metrics","name":"query1","aggregator":"last"}]}]},"layout":{"x":3,"y":0,"width":3,"height":4}},{"id":123945615885567,"definition":{"title":"Total Delivered Messages per Consumer","title_size":"16","title_align":"left","show_legend":false,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"query1"}],"response_format":"timeseries","queries":[{"query":"sum:memphis.nats_consumer_delivered_consumer_seq{consumer_name:*} by {consumer_name}","data_source":"metrics","name":"query1"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}]},"layout":{"x":0,"y":4,"width":6,"height":2}}]},"layout":{"x":6,"y":0,"width":6,"height":7}}],"template_variables":[],"layout_type":"ordered","notify_list":[],"reflow_type":"fixed","id":"baw-mzn-4mn"}